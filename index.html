import React, { useState, useEffect } from "react";

// NOTE: This component is framework-agnostic React and uses Tailwind CSS classes.
// If you are on Next.js, you can drop this into app/page.tsx (or a route) and
// optionally replace <img> with next/image for better performance.

const works = [
  // Replace with real projects
  {
    title: "Breathing Marionette",
    meta: "2025 · wood, servos, Arduino, LEDs",
    blurb:
      "A study in breath-detection to trigger micro-movements and light pulsation. Iterated hysteresis thresholds to avoid jitter.",
    image: "/placeholder-1.jpg",
  },
  {
    title: "Market Spirits (Talpiot)",
    meta: "2024 · cardboard, reed switches, microcontroller",
    blurb:
      "Community-built puppets mapped to ambient market sounds; motion emerges from crowd proximity.",
    image: "/placeholder-2.jpg",
  },
  {
    title: "Choochoo Guardian",
    meta: "2025 · papier-mâché, IMU, light script",
    blurb:
      "Dog-inspired puppet that tilts its head in response to footsteps; light script authored with a tiny domain language.",
    image: "/placeholder-3.jpg",
  },
];

export default function Portfolio() {
  const [menuOpen, setMenuOpen] = useState(false);
  const [active, setActive] = useState("home");

  // Simple scroll spy
  useEffect(() => {
    const sections = Array.from(document.querySelectorAll("section[id]"));
    const obs = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            setActive(entry.target.id);
          }
        });
      },
      { rootMargin: "-50% 0px -45% 0px", threshold: 0.01 }
    );
    sections.forEach((s) => obs.observe(s));
    return () => obs.disconnect();
  }, []);

  const NavLink = ({ href, label }: { href: string; label: string }) => (
    <a
      href={href}
      onClick={() => setMenuOpen(false)}
      className={`hover:opacity-70 transition-opacity ${
        active === href.replace("#", "") ? "font-semibold" : ""
      }`}
    >
      {label}
    </a>
  );

  return (
    <main className="min-h-screen bg-white text-zinc-900 scroll-smooth">
      {/* Skip link for a11y */}
      <a
        href="#home"
        className="sr-only focus:not-sr-only focus:fixed focus:top-3 focus:left-3 focus:z-[999] bg-zinc-900 text-white px-3 py-2 rounded-lg"
      >
        Skip to content
      </a>

      {/* NAV */}
      <header className="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/70 border-b border-zinc-200">
        <div className="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
          <a href="#home" className="font-semibold tracking-tight">
            Lenny Filler · Puppetronics
          </a>
          {/* Desktop nav */}
          <nav className="hidden md:flex gap-6 text-sm" aria-label="Primary">
            <NavLink href="#works" label="Works" />
            <NavLink href="#statement" label="Statement" />
            <NavLink href="#research" label="Research Focus" />
            <NavLink href="#cv" label="CV" />
            <NavLink href="#contact" label="Contact" />
          </nav>
          {/* Mobile toggle */}
          <button
            className="md:hidden inline-flex items-center justify-center rounded-xl border border-zinc-300 px-3 py-2"
            aria-expanded={menuOpen}
            aria-controls="mobile-menu"
            onClick={() => setMenuOpen((v) => !v)}
          >
            {menuOpen ? "Close" : "Menu"}
          </button>
        </div>
        {/* Mobile nav panel */}
        {menuOpen && (
          <nav id="mobile-menu" className="md:hidden border-t border-zinc-200 bg-white/90">
            <div className="mx-auto max-w-6xl px-4 py-3 flex flex-col gap-3 text-sm">
              <NavLink href="#works" label="Works" />
              <NavLink href="#statement" label="Statement" />
              <NavLink href="#research" label="Research Focus" />
              <NavLink href="#cv" label="CV" />
              <NavLink href="#contact" label="Contact" />
            </div>
          </nav>
        )}
      </header>

      {/* HERO */}
      <section id="home" className="relative overflow-hidden">
        <div className="absolute inset-0 -z-10 bg-gradient-to-br from-zinc-50 via-emerald-50 to-zinc-50" />
        <div className="mx-auto max-w-6xl px-4 py-20 grid md:grid-cols-2 gap-12 items-center">
          <div>
            <h1 className="text-4xl md:text-5xl font-semibold leading-tight">
              Puppetronics — Breathing Life into the Inanimate
            </h1>
            <p className="mt-5 text-lg text-zinc-700">
              I create puppets that live. Through sensors, microcontrollers, and carefully written code, I give sculpted figures the ability to move, glow, and respond to the world around them — even when they’re not in my hands. This is not robotics in the utilitarian sense; it’s a search for presence. My question is not “What can the machine do for me?” but “How do I breathe life into a character?”
            </p>
            <div className="mt-6 flex gap-3">
              <a href="#works" className="px-4 py-2 rounded-2xl bg-zinc-900 text-white">
                View selected works
              </a>
              <a href="#statement" className="px-4 py-2 rounded-2xl border border-zinc-300">
                Artist statement
              </a>
            </div>
          </div>
          <div className="aspect-[4/3] rounded-3xl shadow-lg bg-gradient-to-br from-zinc-200 to-zinc-50 grid place-items-center">
            {/* Swap for a real image or video */}
            <span className="text-sm text-zinc-600">Hero image placeholder</span>
          </div>
        </div>
      </section>

      {/* WORKS */}
      <section id="works" className="mx-auto max-w-6xl px-4 py-16">
        <div className="flex items-end justify-between">
          <h2 className="text-2xl font-semibold">Selected Works</h2>
          <p className="text-sm text-zinc-600">6–10 projects, each with images/video + short process notes</p>
        </div>
        <div className="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {works.map((w, i) => (
            <article key={i} className="group">
              <div className="aspect-[4/3] overflow-hidden rounded-2xl bg-zinc-100 border border-zinc-200 grid place-items-center">
                {/* Replace src with real asset or <video> */}
                <img
                  src={w.image}
                  alt={w.title}
                  className="h-full w-full object-cover object-center"
                  loading="lazy"
                />
              </div>
              <h3 className="mt-3 font-medium">{w.title}</h3>
              <p className="text-sm text-zinc-600">{w.meta}</p>
              <p className="mt-1 text-sm text-zinc-700 line-clamp-3">{w.blurb}</p>
            </article>
          ))}
        </div>
      </section>

      {/* STATEMENT */}
      <section id="statement" className="mx-auto max-w-3xl px-4 py-16">
        <h2 className="text-2xl font-semibold">Artist Statement</h2>
        <p className="mt-4 text-zinc-800">
          I create puppets that live. Through sensors, microcontrollers, and carefully written code, I give sculpted figures the ability to move, glow, and respond to the world around them — even when they’re not in my hands. This is not robotics in the utilitarian sense; it’s a search for presence. My question is not “What can the machine do for me?” but “How do I breathe life into a character?”
        </p>
        <p className="mt-4 text-zinc-800">
          Electricity and code act as the puppet’s DNA and nervous system, translating touch, proximity, or breath into motion and light. AI, both textual and visual, becomes a collaborator — shaping behaviors, moods, and stories that deepen the puppet’s world.
        </p>
        <p className="mt-4 text-zinc-800">
          I am drawn to settings that carry both pain and hope, where human culture reflects itself in the mechanical, and the mechanical returns that humanity in unexpected ways. In my work, the warmth of hand-built imperfection meets the precision of circuitry. Woman, code, electricity, and imagination come together to craft narratives from within the grain of matter.
        </p>
      </section>

      {/* RESEARCH FOCUS */}
      <section id="research" className="mx-auto max-w-5xl px-4 py-16">
        <h2 className="text-2xl font-semibold">Research Focus</h2>
        <div className="mt-6 grid md:grid-cols-3 gap-6">
          <div className="p-5 rounded-2xl border border-zinc-200">
            <h3 className="font-medium">Sensorial dramaturgy</h3>
            <p className="mt-2 text-sm text-zinc-700">Designing behaviors from touch, breath, gaze and proximity. From threshold detection to nuanced hysteresis and “moods.”</p>
          </div>
          <div className="p-5 rounded-2xl border border-zinc-200">
            <h3 className="font-medium">Material & error</h3>
            <p className="mt-2 text-sm text-zinc-700">Letting cardboard, wood and adhesive seams speak. Embracing noise, slack, friction and latency as expressive properties.</p>
          </div>
          <div className="p-5 rounded-2xl border border-zinc-200">
            <h3 className="font-medium">AI as partner</h3>
            <p className="mt-2 text-sm text-zinc-700">Using text‑ and pixel‑level AI to sketch gestures, generate light scripts, and rehearse interactions without replacing the human hand.</p>
          </div>
        </div>
      </section>

      {/* CV */}
      <section id="cv" className="mx-auto max-w-4xl px-4 py-16">
        <h2 className="text-2xl font-semibold">CV (selected)</h2>
        <ul className="mt-4 space-y-2 text-sm text-zinc-800 list-disc pl-6">
          <li>Education — BA/Workshops (fill in)</li>
          <li>Exhibitions / Performances — year · venue · city</li>
          <li>Residencies / Grants — year · program</li>
          <li>Teaching / Workshops — year · institution</li>
          <li>Publications / Press — year · outlet</li>
        </ul>
        <div className="mt-4 flex gap-3">
          {/* Replace href with real files; on Next.js, place files in /public */}
          <a className="px-3 py-2 rounded-xl border border-zinc-300" href="/Lenny-Filler-CV.pdf" download>
            Download CV (PDF)
          </a>
          <a className="px-3 py-2 rounded-xl border border-zinc-300" href="/Lenny-Filler-Portfolio.pdf" download>
            Download Portfolio (PDF)
          </a>
        </div>
      </section>

      {/* CONTACT */}
      <section id="contact" className="mx-auto max-w-3xl px-4 py-16">
        <h2 className="text-2xl font-semibold">Contact</h2>
        <p className="mt-2 text-sm text-zinc-700">
          Email: <a href="mailto:your.name@example.com" className="font-mono underline">your.name@example.com</a> · Instagram/Vimeo links
        </p>
        <p className="mt-6 text-xs text-zinc-500">Optional: protect this page with a password for admissions use only.</p>
      </section>

      <footer className="border-t border-zinc-200 py-10 mt-8">
        <div className="mx-auto max-w-6xl px-4 text-xs text-zinc-500">
          © {new Date().getFullYear()} Lenny Filler · Puppetronics
        </div>
      </footer>
    </main>
  );
}
